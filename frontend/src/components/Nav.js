import { useState } from 'react';
import { BrowserRouter as Router,
    Routes,
    Route,
    Link } from "react-router-dom";

/* === COMPONENTS === */
import Landing from '../pages/Landing';
import CollaboratorView from '../pages/CollaboratorView';
import CollaboratorList from '../pages/CollaboratorList';
import EventList from '../pages/EventList';
import Contact from '../pages/Contact';
import Research from '../pages/Research';
import useFetch from '../useFetch';

    function Nav() {
        const { isLoading, error, data } = useFetch(`${process.env.REACT_APP_BACKEND}/api/projects`)
        const [open, setOpen] = useState(false);

        let projects = null;

        if (data) {

            projects = data.data
            console.log(data)

            return (
                <Router>
                        <div className="nav-wrapper flex column" > 
                            <div className="top-nav-container flex column row-gap-50">
                                <svg viewBox="0 0 194 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_231_824)">
                                    <path d="M11.8656 25.689C10.3732 25.689 9.50667 25.1139 9.16969 23.8199C8.92898 22.9092 8.54386 22.43 7.67733 22.43H1.9486C1.03393 22.43 0.45624 22.9572 0.504381 23.9157C0.985787 30.2901 4.59633 33.8367 11.8656 33.8367H18.8591V25.689H11.8656ZM21.1567 0H12.1063C3.9705 0 0.696943 3.88211 0.696943 10.4002C0.696943 16.9183 3.58538 19.5064 10.9509 20.0815L18.8591 20.6741V15.2975H29.1568C27.5813 14.413 25.485 13.8989 22.7935 13.7072L11.9137 12.8924C9.93994 12.7487 9.16969 12.1735 9.16969 10.4482C9.16969 8.72277 10.0844 8.14764 12.2025 8.14764H21.1567C22.6491 8.14764 23.5156 8.72277 23.8526 10.0168C24.0933 10.9274 24.4784 11.4067 25.3449 11.4067H31.0737C31.9883 11.4067 32.566 10.8795 32.5179 9.92095C32.0365 3.54662 28.4259 0 21.1567 0ZM30.741 16.4783H20.1064V20.7656L21.8307 20.8963C23.8044 21.0401 24.5747 21.6152 24.5747 23.3885C24.5747 25.1618 23.66 25.689 21.5418 25.689H20.1064V33.8367H21.6381C29.7739 33.8367 33.0474 29.9546 33.0474 23.4364C33.0474 20.3255 32.3384 18.0512 30.741 16.4783Z" fill="var(--primary-util)"/>
                                    <path d="M45.669 16.4783V32.3989C45.669 33.3095 46.1985 33.8367 47.1132 33.8367H52.8419C53.7566 33.8367 54.2861 33.3095 54.2861 32.3989V16.4783H45.669ZM63.481 0H36.4741C35.5595 0 35.0299 0.5272 35.0299 1.43782V6.75775C35.0299 7.66837 35.5595 8.19557 36.4741 8.19557H45.669V15.2975H54.2861V8.19557H63.481C64.3957 8.19557 64.9252 7.66837 64.9252 6.75775V1.43782C64.9252 0.5272 64.3957 0 63.481 0Z" fill="var(--primary-util)"/>
                                    <path d="M75.0961 0H69.4155C68.5008 0 67.9713 0.5272 67.9713 1.43782V15.2975H76.5403V1.43782C76.5403 0.5272 76.0107 0 75.0961 0ZM100.562 0H94.8818C93.9672 0 93.4376 0.5272 93.4376 1.43782V15.2975H102.007V1.43782C102.007 0.5272 101.477 0 100.562 0ZM93.4376 16.4783V22.4779C93.4376 25.3535 92.2822 25.689 90.5973 25.689H79.3806C77.6957 25.689 76.5403 25.3535 76.5403 22.4779V16.4783H67.9713V22.1903C67.9713 29.0439 71.6781 33.8367 79.3806 33.8367H90.5973C98.2998 33.8367 102.007 29.0439 102.007 22.1903V16.4783H93.4376Z" fill="var(--primary-util)"/>
                                    <path d="M129.263 0H108.707C107.792 0 107.263 0.5272 107.263 1.43782V15.2975H115.832V8.14764H128.204C130.515 8.14764 132.151 8.67484 132.151 12.7487V15.2975H140.624V12.7007C140.624 4.50517 136.917 0 129.263 0ZM132.151 16.4783V21.2318C132.151 25.3056 130.37 25.7849 128.204 25.7849H115.832V16.4783H107.263V32.3989C107.263 33.3095 107.792 33.8367 108.707 33.8367H129.263C136.917 33.8367 140.624 29.4753 140.624 21.3276V16.4783H132.151Z" fill="var(--primary-util)"/>
                                    <path d="M152.138 0H146.506C145.591 0 145.062 0.5272 145.062 1.43782V15.2975H153.583V1.43782C153.583 0.5272 153.053 0 152.138 0ZM145.062 16.4783V32.3989C145.062 33.3095 145.591 33.8367 146.506 33.8367H152.138C153.053 33.8367 153.583 33.3095 153.583 32.3989V16.4783H145.062Z" fill="var(--primary-util)"/>
                                    <path d="M169.43 25.689C167.745 25.689 166.589 25.3535 166.589 22.4779V16.4783H158.02V22.1903C158.02 29.0439 161.727 33.8367 169.43 33.8367H173.907V25.689H169.43ZM182.091 0H169.43C161.727 0 158.02 4.79273 158.02 11.6943V15.2975H166.589V11.4067C166.589 8.48313 167.6 8.14764 169.43 8.14764H182.091C183.92 8.14764 184.931 8.48313 184.931 11.4067V22.4779C184.931 25.3535 183.776 25.689 182.091 25.689H175.145V33.8367H182.091C189.793 33.8367 193.5 29.0439 193.5 22.1903V11.6943C193.5 4.79273 189.793 0 182.091 0Z" fill="var(--primary-util)"/>
                                    <path d="M20.1063 36.172V44.3458C22.9817 44.5114 24.5747 45.3784 24.5747 48.912V49.6788C24.5747 51.7615 23.9839 52.903 22.9204 53.5217H32.8592C33.0868 52.3584 33.1918 51.1036 33.1918 49.7747V48.8641C33.1918 40.8646 29.2487 36.3812 20.1063 36.172ZM32.5835 54.7025H18.8591V54.2319H9.0734V44.311H18.8591V36.1633H1.94859C1.03392 36.1633 0.5 36.6905 0.5 37.6012V68.5622C0.5 69.4728 1.02955 70 1.94422 70H7.62481C8.53948 70 9.06903 69.4728 9.06903 68.5622V62.2837H18.312L22.5484 69.0415C22.9335 69.7124 23.5112 70 24.2815 70H30.7804C31.9358 70 32.3691 69.2811 31.6951 68.2746L26.8329 61.3252C29.8876 60.0965 31.7126 57.7785 32.5791 54.7025H32.5835Z" fill="var(--primary-util)"/>
                                    <path d="M60.3694 37.2657C60.0324 36.4988 59.5029 36.1633 58.6845 36.1633H51.9929C51.1745 36.1633 50.645 36.4988 50.308 37.2657L42.8725 53.5217H51.7654L55.3628 44.8861L58.9602 53.5217H67.8049L60.3694 37.2657ZM74.5709 68.3225L68.3432 54.7025H59.4547L60.7545 57.8265H49.971L51.2708 54.7025H42.3342L36.1065 68.3225C35.6733 69.329 36.1065 70 37.2138 70H43.6646C44.483 70 45.0607 69.6166 45.3495 68.8977L47.0826 64.728H63.5948L65.3279 68.8977C65.6167 69.6166 66.1944 70 67.0128 70H73.4636C74.5709 70 75.0041 69.329 74.5709 68.3225Z" fill="var(--primary-util)"/>
                                    <path d="M111.39 54.7025L110.212 58.8809L109.136 54.7025H101.788L105.446 68.7539C105.639 69.5687 106.217 70 107.083 70H113.293C114.112 70 114.689 69.6166 114.93 68.8018L119.569 54.7025H111.39ZM104.676 37.4094C104.484 36.5947 103.906 36.1633 103.039 36.1633H97.07C96.2035 36.1633 95.6258 36.5947 95.4333 37.4094L91.2757 53.5217H98.628L100.055 48.0493L101.481 53.5217H108.829L104.676 37.4094ZM83.8314 37.3615C83.5907 36.4988 83.0611 36.1633 82.2427 36.1633H76.1726C75.1135 36.1633 74.6321 36.8343 74.9691 37.7929L80.1464 53.5217H88.3828L83.8314 37.3615ZM90.9693 54.7025L89.8927 58.8809L88.7155 54.7025H80.5359L85.1793 68.8018C85.4156 69.6166 85.9977 70 86.8117 70H93.0262C93.8927 70 94.4704 69.5687 94.663 68.7539L98.3217 54.7025H90.9693ZM123.932 36.1633H117.867C117.048 36.1633 116.519 36.4988 116.278 37.3615L111.722 53.5217H119.959L125.136 37.7929C125.473 36.8343 124.992 36.1633 123.932 36.1633Z" fill="var(--primary-util)"/>
                                    <path d="M156.76 61.8524H139.189V54.7025H130.62V68.5622C130.62 69.4728 131.149 70 132.064 70H156.76C157.675 70 158.204 69.4728 158.204 68.5622V63.2902C158.204 62.3796 157.675 61.8524 156.76 61.8524ZM137.744 36.1633H132.064C131.149 36.1633 130.62 36.6905 130.62 37.6012V53.5217H139.189V37.6012C139.189 36.6905 138.659 36.1633 137.744 36.1633Z" fill="var(--primary-util)"/>
                                    <path d="M172.655 44.311H173.907V36.1633H172.559C164.423 36.1633 161.15 40.0454 161.15 46.5636C161.15 49.7093 161.854 51.975 163.456 53.5217H173.907V49.1691L172.366 49.0558C170.393 48.912 169.622 48.3369 169.622 46.6115C169.622 44.8861 170.537 44.311 172.655 44.311ZM183.246 49.8705L175.145 49.2649V54.7025H165.097C166.664 55.5477 168.743 56.0357 171.403 56.2449L182.283 57.0596C184.257 57.2034 185.027 57.7785 185.027 59.5518C185.027 61.3252 184.113 61.8524 181.994 61.8524H172.318C170.826 61.8524 169.959 61.2772 169.622 59.9832C169.382 59.0726 168.996 58.5933 168.13 58.5933H162.401C161.486 58.5933 160.909 59.1205 160.957 60.0791C161.438 66.4534 165.049 70 172.318 70H182.091C190.226 70 193.5 66.1179 193.5 59.5998C193.5 53.0817 190.563 50.3977 183.246 49.8705ZM181.609 36.1633H175.145V44.311H181.609C183.102 44.311 183.968 44.8861 184.305 46.1801C184.546 47.0908 184.931 47.57 185.797 47.57H191.526C192.441 47.57 193.019 47.0428 192.97 46.0843C192.489 39.7099 188.878 36.1633 181.609 36.1633Z" fill="var(--primary-util)"/>
                                    </g>
                                    <defs>
                                    <clipPath id="clip0_231_824">
                                    <rect width="193" height="70" fill="white" transform="translate(0.5)"/>
                                    </clipPath>
                                    </defs>
                                </svg>
                                <div className="flex column row-gap-10">
                                    {/* <Link to={ "/events" }>
                                        <h6>Events</h6>
                                    </Link> */}
                                    
                                    {/* <Link to={ "/research" }>
                                        <h6>Research</h6>
                                    </Link> */}
                                    <div className="productions-dropdown">
                                        <h6
                                            onClick={() => setOpen(!open)}
                                            style={{ cursor: "pointer" }}
                                        >
                                            Productions
                                        </h6>

                                        <div className={`dropdown-wrapper ${open ? "open" : ""}`}>
                                            <div className="dropdown-list">
                                            {projects?.map((project, index) => (
                                                <Link  to={ `/projects/${project.slug}` } key={index} className="dropdown-item">
                                                    <p>{project.Project_Title}</p>
                                                </Link>
                                            ))}
                                            </div>
                                        </div>
                                    </div>
                                    <Link to={ "/" }>
                                        <h6>Productions</h6>
                                    </Link>
                                    <Link to={ "/collaborators" }>
                                        <h6>Collaborators</h6>
                                    </Link>
                                    {/* <Link to={ "/contact" }>
                                        <h6>Contact</h6>
                                    </Link> */}
                                    <Link to="https://whistlespace.org" target='_blank'>
                                        <h6>Whistelspace</h6>
                                    </Link>
                                </div>
                            </div>
                            <div className="bottom-nav-container">
                                <div>
                                    <Link to={ `mailto:${ "/" }`} >
                                        <svg className="social-icon" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.42 22">
                                            <defs>
                                                <style>
             
                                                </style>
                                            </defs>
                                            <g id="Layer_1-2" data-name="Layer 1">
                                                <g>
                                                <path class="cls-1" d="M28.42,4.54v12.84c0,1.7-1.28,3.13-3.02,3.52-.31.06-.63.1-.95.1H4.98c-.33,0-.66-.04-.97-.11-1.73-.39-3.02-1.81-3.02-3.51V4.63s0-.06.01-.09c0-.42.09-.82.25-1.19.11-.25.24-.5.43-.72.19-.29.44-.55.72-.76.69-.55,1.59-.87,2.57-.87h19.47c.98,0,1.86.32,2.56.86.29.22.54.47.73.75.18.23.32.48.43.74.15.37.24.77.25,1.19Z"/>
                                                <path class="cls-2" d="M27.74,2.61l-10.32,9.42-.86.77-1.51,1.38c-.19.17-.5.17-.69,0l-1.51-1.38-.57-.52-.29-.26L1.69,2.63c.19-.29.44-.55.72-.76l11.86,10.81c.24.22.63.22.87,0l1.22-1.11.78-.71L27.01,1.86c.29.22.54.47.73.75Z"/>
                                                </g>
                                            </g>
                                        </svg>
                                    </Link>
                                    <Link to={ "/" }>
                                        <svg className="social-icon" viewBox="0 0 676 676" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path id="instagram" d="M338 194.25C309.569 194.25 281.776 202.681 258.137 218.476C234.497 234.272 216.072 256.722 205.192 282.989C194.312 309.256 191.466 338.159 197.012 366.044C202.559 393.929 216.25 419.543 236.353 439.647C256.457 459.75 282.071 473.441 309.956 478.988C337.841 484.534 366.744 481.688 393.011 470.808C419.278 459.928 441.728 441.503 457.524 417.863C473.319 394.224 481.75 366.431 481.75 338C481.707 299.888 466.548 263.35 439.599 236.401C412.65 209.452 376.112 194.293 338 194.25ZM338 406.75C324.403 406.75 311.11 402.718 299.805 395.164C288.499 387.609 279.687 376.872 274.483 364.309C269.28 351.747 267.918 337.924 270.571 324.588C273.224 311.251 279.772 299.001 289.386 289.386C299.001 279.772 311.251 273.224 324.588 270.571C337.924 267.918 351.747 269.28 364.309 274.483C376.872 279.687 387.609 288.499 395.164 299.805C402.718 311.11 406.75 324.403 406.75 338C406.729 356.227 399.48 373.702 386.591 386.591C373.702 399.48 356.227 406.729 338 406.75ZM488 0.5H188C138.289 0.556342 90.6306 20.3288 55.4797 55.4797C20.3288 90.6306 0.556342 138.289 0.5 188V488C0.556342 537.711 20.3288 585.369 55.4797 620.52C90.6306 655.671 138.289 675.444 188 675.5H488C537.711 675.444 585.369 655.671 620.52 620.52C655.671 585.369 675.444 537.711 675.5 488V188C675.444 138.289 655.671 90.6306 620.52 55.4797C585.369 20.3288 537.711 0.556342 488 0.5ZM600.5 488C600.466 517.827 588.603 546.422 567.512 567.512C546.422 588.603 517.827 600.466 488 600.5H188C158.173 600.466 129.578 588.603 108.488 567.512C87.397 546.422 75.5336 517.827 75.5 488V188C75.5336 158.173 87.397 129.578 108.488 108.488C129.578 87.397 158.173 75.5336 188 75.5H488C517.827 75.5336 546.422 87.397 567.512 108.488C588.603 129.578 600.466 158.173 600.5 188V488ZM550.5 175.5C550.5 185.389 547.568 195.056 542.073 203.279C536.579 211.501 528.77 217.91 519.634 221.694C510.498 225.478 500.445 226.469 490.745 224.539C481.046 222.61 472.137 217.848 465.145 210.855C458.152 203.863 453.39 194.954 451.461 185.255C449.531 175.555 450.522 165.502 454.306 156.366C458.09 147.23 464.499 139.421 472.721 133.927C480.944 128.432 490.611 125.5 500.5 125.5C513.756 125.515 526.465 130.788 535.839 140.161C545.212 149.535 550.485 162.244 550.5 175.5Z"/>
                                        </svg>
                                    </Link>
                                </div>
                                <Link to={ "/" }>
                                    <p id="newsletter">Newsletter</p>
                                </Link>
                            </div>
                        </div>
                    <Routes>
                        <Route path="/" element={<Landing />} />
                        <Route path="/collaborators/:id" element={<CollaboratorView />} />
                        <Route path="/collaborators" element={<CollaboratorList />} />
                        <Route path="/events" element={<EventList />} />
                        <Route path="/research" element={<Research />} />
                        <Route path="/contact" element={<Contact />} />
                    </Routes>
                </Router>
            );
        }
    }
    
    export default Nav;